# Задание - Хоккейная Федерация

Вы участвуете в проекте по разработке системы учета соревнований для хоккейной федерации и в рамках этого проекта необходимо решить следующие задачи:

1. Хранение данных об игроках, командах, играх и их результатах;
2. Расчет статистики и рейтингов игроков по итогам прошедших игр.

## Решение этих задач состоит из следующих этапов:

### Этап 1. Модель данных

У заказчика есть набор исторических данных, на которых будет проведена проверка системы расчетов рейтингов, поэтому прежде чем разрабатывать систему целиком, было решено сначала спроектировать модель данных и проверить ее на исторических значениях.
Ниже приведен перечень бизнес объектов, которыми оперирует федерация и и для которых у них есть исторические данные.

Сезон - период времени, ограниченный двумя датами, в рамках которого проходят игры и в рамках которого ведется учет статистики.

Игра - одно футбольное состязание, в котором участвуют действующие игроки двух команд. Игра всегда проходит в рамках сезона и заканчивается с некоторым счетом. В одно время проходит максимум одна игра.

Команда - объединение игроков, которое имеет название и состав участников. Состав участников в команде может меняться от сезона к сезону: один и тот же игрок в разных сезонах может играть за разные команды. В пределах одного сезона игрок не может менять команду.

Игрок - участник соревнований, обязательно состоит в команде, участвует в играх и забивает голы. Имеет и фамилию, а также свою статистику забитых шайб.

Шайба - забитый игроком гол. Учитывается и как персональный результат игрока, и как результат команды в пределах сезона.

Исторические сведения представлены следующим образом:

То есть это плоская структура, в которой указано, сколько было забито голов игроком в составе команды во время игры, проходящей в рамках сезона.

**Типы данных:**

```
Сезон, с: дата (строка в формате DD.MM.YYYY - как в примере)
Сезон, по: дата  (строка в формате DD.MM.YYYY - как в примере)
Игра: дата  (строка в формате DD.MM.YYYY HH:MM - как в примере)
Команда : строка(50)
Игрок : строка(50)
Забито: целое число
```

**Решение задачи 1 этапа предполагает 4 шага:**

1. Создать модель данных. Необходимо спроектировать таблицы и разработать SQL запрос, который создаст эти таблицы в БД. Количество таблиц и их взаимосвязь определяете вы. Запрос может включать в себя создание индексов, внешних ключей и т д.
2. Создать скрипт для загрузки данных. Созданные вами таблицы должны быть заполнены имеющимися историческими данными. Необходимо написать SQL запрос для добавления данных в вашу модель, в котором вместо данных будут указаны номера столбцов из таблицы выше.

Пример:

~~~
INSERT INTO my_table (my_field1, my_field2) VALUES ('{1}', '{2}')
~~~

Механизм проверки задания выполнит этот запрос n раз ( где n - количество исторических записей, аналогичных тем что приведены в таблице) и каждый раз вместо {1} и {2} будет подставлять значения из первого и второго столбцов (“Сезон, с” и “Сезон, по”). Скрипт импорта данных может иметь несколько конструкций INSERT или любых других, один и тот же параметр (например, {1}) может встречаться несколько раз в разных конструкциях.

В результате все исторические данные будут разложены в вашу структуру таблиц.

3. Создать скрипт для преобразования данных. Это опциональный SQL запрос, который вы можете подготовить и он будет выполнен на уже загруженных данных. Его можно использовать для подготовки агрегирующих разрезов, витрин, представлений и тп.
4. Создать скрипты для получения статистики. Необходимо разработать SQL скрипты, которые будут возвращать статистические данные. Ниже приведена таблица, в которой указано:
              a. Суть задания - то есть то, что нужно получить
              b. Параметры, которые будут подставлены механизмом проверки для данного задания


Вам нужно сделать три SQL запроса, каждый из которых будет возвращать одно числовое значение в столбце с названием result. Каждый запрос должен содержать номера параметров из таблицы в качестве условий для выборки.

Механизм проверки будет подставлять вместо номеров параметров проверочные значения и анализировать результат запроса, который выведется в столбце result.

Пример:

~~~
SELECT result FROM my_view WHERE team = '{1}' AND game = '{2}'
~~~

В этот запрос будет подставлено при поверке название команды и дата игры.


### Этап 2. Спецификация на разработку

После того, как первый этап успешно выполнен (скрипты работают и система проверки заданий начисляет баллы), можно переходить к следующему этапу - подготовке спецификации на разработку бэкенда системы.
Под спецификацией здесь понимается документ, который описывает, сценарии или алгоритмы работы программных интерфейсов системы, которые должна реализовать команда разработки. Эти интерфейсы будут использоваться фронтендом системы для сохранения или отображения данных.

Спецификация должна описывать интерфейсы для реализацию следующих функций:

1. Создание новой команды
2. Добавление нового игрока в команду
3. Перевод игрока из одной команды в другую
4. Регистрация нового сезона
5. Регистрация новой игры
6. Фиксация забитой шайбы
7. Получение счета команды в определенной игре
8. Получение количества игр игрока за сезон
9. Лучший бомбардир сезона

Количество описанных интерфейсов не обязательно должно совпадать с количеством функций - функции можно объединять в один интерфейс или декомпозировать.

Описание каждого интерфейса должен содержать:

1. предлагаемый HTTP метод и URL
2. перечень входных параметров (запрос)
3. перечень возвращаемых параметров (ответ)
4. сутевое описание (что делает данный метод)
5. шаги сценария, выполняющего заявленную функцию
